## 9장 일반적인 프로그래밍 원칙

이번 장에서는 자바 언어의 핵심 요소에 집중한다. 지역변수, 제어구조, 라이브러리, 데이터 타입, 그리고 언어 경계를 넘나드는 기능인 리플렉션과 네이티브 메서드를 다룬다. 마지막으로는 최적화와 명명 규칙을 논한다.

### 아이템57 - 지역변수의 범위를 최소화하라

___
지역변수의 유효 범위를 최소로 줄이면 코드 가독성과 유지보수성이 높아지고 오류 가능성은 낮아진다.

#### 57-1. 지역변수 선언 기법

1. 가장 처음 쓰일 때 선언하라

2. 거의 모든 지역변수는 선언과 동시에 초기화해야 한다.
    - 초기화에 필요한 정보가 충분하지 않다면 충분해질 때까지 선언을 미뤄야 한다.
    - `try-catch`문은 이 규칙에서 예외다.

3. 반복 변수의 값을 반복문이 종료된 뒤에도 써야하는 상황이 아니라면 while 문보다는 for 문을 쓰는 편이 낫다.
    - while 문은 반복변수를 반복문 바깥 블록에 선언해야 함.
    - for 문은 복사해 붙여넣기 오류를 컴파일 타임에 잡아준다.(while은 안 잡아줌.)
    - while 문보다 짧아서 가독성이 좋다.

```java
public class Main {
    public static void main(String[] args) {
        // 컬렉션이나 배열을 순회하는 권장 관용구
        for (Element e : c) {
            return;// e로 무언가 수행 
        }
        // 반복자가 필요할 때의 관용구
        for (Iterator<Element> i = c.iterator(); i.hasNext(); ) {
            Element e = i.next();
            // e와 i로 무언가 수행 }
        }
    }
```

4. 메서드를 작게 유지하고 한 가지 기능에 집중하는 것이다.
    - 단순히 메서드를 기능별로 쪼개면 된다.

### 아이템58 - 전통적인 for 문보다는 for-each 문을 사용하라.

___
for-each 문의 정식 이름은 '향상된 for 문' 이다. for-each을 사용하면 반복자와 인덱스 변수를 사용하지 않으니 코드가 깔끔해지고 오류가 날 일도 사라진다.

```java
public class Main {
    public static void main(String[] args) {
        for (Element e : c) {
            return;// e로 무언가 수행 
        }
    }
}
```

여기서 콜론(:)은 "안의(in)" 라고 읽으면 된다.

#### 58-1. for-each 문을 사용할 수 없는 경우

1. 파괴적인 필터링: 컬렉션을 순회하면서 선택된 원소를 제거하려면 반복자의 `remove`를 사용해야 함.
    - 자바8부터는 `Collection`의 `removeIf` 메서드를 사용해 컬렉션을 명시적으로 순회하는 일을 피할 수 있다.

2. 변형: 리스트나 배열을 순회하면서 그 원소의 값 일부 혹은 전체를 교체해야 함

3. 병렬 반복: 여러 컬렉션을 병렬로 순회해야 한다면 각각의 반복자와 인덱스 변수를 사용해 엄격하고 명시적으로 제어해야 함.

> 결론: 전통적인 for 문과 비교했을 때 for-each 문은 명료하고, 유연하고, 버그를 예방해준다. 성능 저하도 없다. 가능한 모든 곳에서 for 문이 아닌 for-each 문을 사용하자.

### 아이템59 - 라이브러리를 익히고 사용하라

___

#### 59-1. 표준 라이브러리 사용시 이점

1. 표준 라이브러리를 사용하면 그 코드를 작성한 전문가의 지식과 여러분보다 앞서 사용한 다른 프로그래머들의 경험을 활용할 수 있다.
    - 자바7부터는 `Random`을 사용하지 말자. => `ThreadLoscalRandom`으로 대체할 것!

2. 핵심적인 일과 크게 관련 없는 문제를 해결하느라 시간을 허비하지 않아도 된다.

3. 따로 노력하지 않아도 성능이 지속해서 개선된다.

4. 기능이 점점 많아진다.

5. 여러분이 작성한 코드가 많은 사람에게 낯익은 코드가 된다.

**`java.lang`, `java.util`, `java.io`와 그 하위 패키지들에는 익숙해지도록 하자.**

**표준 라이브러리에서 원하는 기능을 찾지 못하면, 고품질의 서드파티 라이브러리를 사용하자**

- ex) 구글 구아바 라이브러리

### 아이템60 - 정확한 답이 필요하다면 `float`와 `double`은 피하라

___
`float`와 `double` 타입은 과학과 공학 계산용으로 설계되었다. 이진 부동소수점 연산에 쓰이며, 넓은 범위의 수를 빠르게 정밀한 **근사치**로 계산하도록 세심하게 설계되었다. 따라서, 정확한 결과가
필요할 때는 사용하면 안 된다.

- 특히 금융 관련 계산과는 맞지 않는다.

금융계산에는 `BigDecimal`, `int`, `long`을 사용해야 한다.

**`BigDecimal`의 단점**

- 기본 타입보다 쓰기가 훨씬 불편하고, 훨씬 느리다.

`int`와 `long`은 다룰 수 있는 값의 크기가 제한되고, 소수점을 직접 관리해야함.

- 숫자를 아홉 자리 십진수로 표현할 수 있다면 `int` 열여덟 자리 십진수로 표현할 수 있다면 `long`을 사용하라. 그 이상은 `BigDecimal`을 사용해야 한다.