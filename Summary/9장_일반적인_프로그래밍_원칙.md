## 9장 일반적인 프로그래밍 원칙

이번 장에서는 자바 언어의 핵심 요소에 집중한다. 지역변수, 제어구조, 라이브러리, 데이터 타입, 그리고 언어 경계를 넘나드는 기능인 리플렉션과 네이티브 메서드를 다룬다. 마지막으로는 최적화와 명명 규칙을 논한다.

### 아이템57 - 지역변수의 범위를 최소화하라

___
지역변수의 유효 범위를 최소로 줄이면 코드 가독성과 유지보수성이 높아지고 오류 가능성은 낮아진다.

#### 57-1. 지역변수 선언 기법

1. 가장 처음 쓰일 때 선언하라

2. 거의 모든 지역변수는 선언과 동시에 초기화해야 한다.
    - 초기화에 필요한 정보가 충분하지 않다면 충분해질 때까지 선언을 미뤄야 한다.
    - `try-catch`문은 이 규칙에서 예외다.

3. 반복 변수의 값을 반복문이 종료된 뒤에도 써야하는 상황이 아니라면 while 문보다는 for 문을 쓰는 편이 낫다.
    - while 문은 반복변수를 반복문 바깥 블록에 선언해야 함.
    - for 문은 복사해 붙여넣기 오류를 컴파일 타임에 잡아준다.(while은 안 잡아줌.)
    - while 문보다 짧아서 가독성이 좋다.

```java
public class Main {
    public static void main(String[] args) {
        // 컬렉션이나 배열을 순회하는 권장 관용구
        for (Element e : c) {
            return;// e로 무언가 수행 
        }
        // 반복자가 필요할 때의 관용구
        for (Iterator<Element> i = c.iterator(); i.hasNext(); ) {
            Element e = i.next();
            // e와 i로 무언가 수행 }
        }
    }
```

4. 메서드를 작게 유지하고 한 가지 기능에 집중하는 것이다.
    - 단순히 메서드를 기능별로 쪼개면 된다.

### 아이템58 - 전통적인 for 문보다는 for-each 문을 사용하라.

___
for-each 문의 정식 이름은 '향상된 for 문' 이다. for-each을 사용하면 반복자와 인덱스 변수를 사용하지 않으니 코드가 깔끔해지고 오류가 날 일도 사라진다.

```java
public class Main {
    public static void main(String[] args) {
        for (Element e : c) {
            return;// e로 무언가 수행 
        }
    }
}
```

여기서 콜론(:)은 "안의(in)" 라고 읽으면 된다.

#### 58-1. for-each 문을 사용할 수 없는 경우

1. 파괴적인 필터링: 컬렉션을 순회하면서 선택된 원소를 제거하려면 반복자의 `remove`를 사용해야 함.
    - 자바8부터는 `Collection`의 `removeIf` 메서드를 사용해 컬렉션을 명시적으로 순회하는 일을 피할 수 있다.

2. 변형: 리스트나 배열을 순회하면서 그 원소의 값 일부 혹은 전체를 교체해야 함

3. 병렬 반복: 여러 컬렉션을 병렬로 순회해야 한다면 각각의 반복자와 인덱스 변수를 사용해 엄격하고 명시적으로 제어해야 함.

> 결론: 전통적인 for 문과 비교했을 때 for-each 문은 명료하고, 유연하고, 버그를 예방해준다. 성능 저하도 없다. 가능한 모든 곳에서 for 문이 아닌 for-each 문을 사용하자.